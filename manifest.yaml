type: install
id: ghost-docker
version: '1.0'
appVersion: latest
name: Ghost (Docker Install)
baseUrl: https://raw.githubusercontent.com/TaylorJadin/Ghost-docker-jps/master/
logo: /ghost.png
homepage: https://ghost.org/

categories: 
- apps/content-management

description: 
  text: Ghost is a free, open-source blogging platform with a user-friendly interface designed to simplify and speed up online publishing process.
  short: The professional publishing platform

globals:
  ghostdbPass: ${fn.password}

nodes:
  nodeType: dockerengine
  nodeGroup: cp
  cloudlets: 16
  extip: true
  displayName: Ghost
  addons: change-domain

actions:
  setup:
    - cmd[cp]:
      wget https://raw.githubusercontent.com/TaylorJadin/Ghost-docker-jps/main/docker-compose.yml
      sed -i.bak \
        -e "s|DOMAINNAME|${env.domain}|g" \
        -e "s|USEREMAIL|${user.email}|g" \
        -e "s|GHOSTDBPASS|${globals.ghostdbPass}|g" \
        -e "s|ROOTDBPASS|${fn.password}|g" \
        docker-compose.yml
      docker-compose up -d

success: | 
  **Ghost**: [https://${env.domain}/](https://${env.domain}/)  